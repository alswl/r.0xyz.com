<html>
<head>
    <meta charset="UTF-8"/>
    <title>Universal Redirector</title>
    <link rel="shortcut icon" href="favicon.png" type="image/x-icon"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/spectre.css/0.5.9/spectre.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/spectre.css/0.5.9/spectre-exp.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/spectre.css/0.5.9/spectre-icons.min.css">

    <script charset="utf-8">
        const fn = function () {
            // Get the value of a URL parameter
            const urlParams = new URLSearchParams(window.location.search);
            const to = urlParams.get('to');

            if (to === null) {
                console.log("No URL parameter found.");
                // set page
                document.getElementById("message").style.display = "block";
                return
            }
            // Redirect to the URL passed as a parameter
            window.location.href = to;
            document.getElementById("to").href = to;
            document.getElementById("to").innerHTML = to;
        };
        document.addEventListener("DOMContentLoaded", function (event) {
            fn();
        });
    </script>
</head>
<body>
<header class="navbar">
    <section class="navbar-section">
        <a href="/new.html" class="btn btn-link">New Link</a>
    </section>
    <section class="navbar-center">
        <a href="/" class="btn btn-link">Universal Redirector</a>
        <!-- centered logo or brand -->
    </section>
    <section class="navbar-section">
        <a href="https://twitter.com/alswl" class="btn btn-link">Twitter</a>
        <a href="https://github.com/alswl/universal-redirector" class="btn btn-link">GitHub</a>
    </section>
</header>
<div class="hero bg-gray">
    <div class="hero-body">
        <h1>Redirecting</h1>
        <a id="to" href="#"></a>
    </div>
    <div id="message" class="toast toast-warning" style="display: none">
        <p>No URL parameter found.</p>
        <p>Put link to <code>?to=yours-external-link</code> URL param</p>
        <p>example: <a href="https://r.0xyz.com/?to=obsidian%3A%2F%2Fopen%3Fvault%3Dmy-logs%26file%3Djournals">https://r.0xyz.com/?to=obsidian%3A%2F%2Fopen%3Fvault%3Dmy-logs%26file%3Djournals</a>
        </p>
    </div>
</div>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SPQ56HTWMV"></script>
<script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());
    gtag('config', 'G-SPQ56HTWMV');
</script>
</body>
</html>
